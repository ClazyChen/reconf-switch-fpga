# Reconfigurable Switch on FPGA

## Primitive

General primitive format (64 bits)

```
 0           5 6        31 32              47 48              63
+-------------+-----------+------------------+------------------+
| op code (6) | misc (26) | field spec1 (16) | field spec2 (16) |
+-------------+-----------+------------------+------------------+
```

Field Spec (16 bits)

```
 0          3 4         9 10     15
+------------+-----------+---------+
| hdr id (4) | start (6) | len (6) |
+------------+-----------+---------+
```

Checksum

```
 0          5 6             9 10           31 32              47 48            63
+------------+---------------+---------------+------------------+----------------+
| 000001 (6) | hash type (4) | reserved (22) | cksum field (16) | dst field (16) |
+------------+---------------+---------------+------------------+----------------+
```

Add

```
 0          5 6         31 32        47 48           63
+------------+------------+------------+---------------+
| 000010 (6) | delta (26) | field (16) | reserved (16) |
+------------+------------+------------+---------------+
```

Copy field

```
 0          5 6            31 32            47 48            63
+------------+---------------+----------------+----------------+
| 000011 (6) | reserved (26) | dst field (16) | src field (16) |
+------------+---------------+----------------+----------------+
```

Set field

```
 0          5 6             31 32            47 48           63
+------------+----------------+----------------+---------------+
| 000100 (6) | arg index (22) | dst field (16) | reserved (16) |
+------------+----------------+----------------+---------------+
```

Set port

```
 0          5 6             31 32            47 48           63
+------------+----------------+----------------+---------------+
| 000101 (6) | arg index (22) | dst field (16) | reserved (16) |
+------------+----------------+----------------+---------------+
```

Set multicast

```
 0          5 6            63
+------------+---------------+
| 000110 (6) | reserved (58) |
+------------+---------------+
```

Recirculate

```
 0          5 6            63
+------------+---------------+
| 000111 (6) | reserved (58) |
+------------+---------------+
```
